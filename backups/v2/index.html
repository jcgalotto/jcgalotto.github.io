<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EcoDashboard Mercosur - An√°lisis de Poder Adquisitivo</title>
    <meta name="description"
        content="Herramienta especializada en an√°lisis de poder adquisitivo real para pa√≠ses del Mercosur">
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Outfit:wght@400;500;700;800&display=swap"
        rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.8.2/jspdf.plugin.autotable.min.js"></script>
</head>

<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="logo-section">
                <div class="logo-icon">üìä</div>
                <div>
                    <h1 class="logo-title">EcoDashboard Mercosur</h1>
                    <p class="logo-subtitle">An√°lisis de Poder Adquisitivo Real</p>
                </div>
            </div>
        </header>

        <!-- Input Form Section -->
        <section class="input-section" id="inputSection">
            <div class="form-card">
                <h2 class="form-title">üîß Configuraci√≥n de An√°lisis</h2>
                <p class="form-description">Ingrese los par√°metros para calcular la variaci√≥n del poder adquisitivo</p>

                <form id="analysisForm" class="analysis-form">
                    <div class="form-group">
                        <label for="usdAmount">üíµ Monto Mensual en USD</label>
                        <input type="number" id="usdAmount" name="usdAmount" placeholder="Ej: 1000" required min="1"
                            step="0.01" value="1000">
                    </div>

                    <div class="form-row">
                        <div class="form-group" style="grid-column: span 2;">
                            <label>üìÖ Rango de Fechas</label>
                            <div id="datePickerContainer" class="datepicker-container"></div>
                        </div>
                    </div>

                    <div class="form-actions">
                        <button type="submit" class="btn-primary">
                            <span>Generar Dashboard Completo</span>
                            <span class="btn-icon">‚Üí</span>
                        </button>
                        <button type="button" id="btnExport" class="btn-secondary hidden">üìÑ Exportar PDF</button>
                    </div>
                </form>
            </div>
        </section>

        <!-- Dashboard Section (Initially Hidden) -->
        <section class="dashboard-section hidden" id="dashboardSection">
            <!-- Configuration Summary -->
            <div class="summary-card">
                <h2>üõ†Ô∏è Resumen de Configuraci√≥n</h2>
                <div class="summary-grid">
                    <div class="summary-item">
                        <span class="summary-label">Inversi√≥n Mensual:</span>
                        <span class="summary-value" id="summaryUSD">$0</span>
                    </div>
                    <div class="summary-item">
                        <span class="summary-label">Ventana Temporal:</span>
                        <span class="summary-value" id="summaryPeriod">-</span>
                    </div>
                    <div class="summary-item">
                        <span class="summary-label">Fuente de Datos:</span>
                        <span class="summary-value" id="dataSource">
                            <span class="badge badge-static" id="dataSourceBadge">üìä Datos Hist√≥ricos</span>
                        </span>
                    </div>
                </div>
            </div>

            <!-- KPIs Section -->
            <div class="kpi-section">
                <h2>üìà Indicadores Clave (KPIs)</h2>
                <div class="kpi-grid">
                    <div class="kpi-card">
                        <div class="kpi-icon">üíπ</div>
                        <div class="kpi-content">
                            <div class="kpi-label">Variaci√≥n de Poder Adquisitivo</div>
                            <div class="kpi-value" id="kpiVariation">-</div>
                            <div class="kpi-status" id="kpiStatus">-</div>
                        </div>
                    </div>

                    <div class="kpi-card">
                        <div class="kpi-icon">üè¶</div>
                        <div class="kpi-content">
                            <div class="kpi-label">Valor Inicial en PYG</div>
                            <div class="kpi-value" id="kpiInitial">-</div>
                            <div class="kpi-status">Base hist√≥rica</div>
                        </div>
                    </div>

                    <div class="kpi-card">
                        <div class="kpi-icon">üí∞</div>
                        <div class="kpi-content">
                            <div class="kpi-label">Valor Real Actualizado</div>
                            <div class="kpi-value" id="kpiReal">-</div>
                            <div class="kpi-status">Ajustado por Inflaci√≥n</div>
                        </div>
                    </div>

                    <!-- New KPI: Final Nominal Value -->
                    <div class="kpi-card">
                        <div class="kpi-icon">üíµ</div>
                        <div class="kpi-content">
                            <div class="kpi-label">Valor Nominal Final</div>
                            <div class="kpi-value" id="kpiNominalFinal">-</div>
                            <div class="kpi-status">Sin ajuste inflaci√≥n</div>
                        </div>
                    </div>

                    <!-- New KPI: Inflation Gap -->
                    <div class="kpi-card">
                        <div class="kpi-icon">‚úÇÔ∏è</div>
                        <div class="kpi-content">
                            <div class="kpi-label">Impacto Inflaci√≥n (P√©rdida)</div>
                            <div class="kpi-value" id="kpiGap">-</div>
                            <div class="kpi-status" id="kpiGapPercent">-</div>
                        </div>
                    </div>
                </div>

                <!-- Exchange Rate Chart -->
                <div class="chart-card">
                    <h2>üìä Variaci√≥n del Tipo de Cambio USD/PYG</h2>
                    <div class="chart-container">
                        <canvas id="exchangeRateChart"></canvas>
                    </div>
                </div>

                <!-- New Advanced Charts Grid -->
                <div class="charts-grid">
                    <!-- Comparative Chart (Start vs End) -->
                    <div class="chart-card">
                        <h2>‚öñÔ∏è Poder Adquisitivo: Inicio vs Fin</h2>
                        <div class="chart-container" style="height: 300px;">
                            <canvas id="comparisonChart"></canvas>
                        </div>
                    </div>

                    <!-- Monthly Gap Chart -->
                    <div class="chart-card">
                        <h2>üí∏ P√©rdida Acumulada (Brecha Real)</h2>
                        <div class="chart-container" style="height: 300px;">
                            <canvas id="gapChart"></canvas>
                        </div>
                    </div>
                </div>

                <!-- Regional Comparison -->
                <div class="regional-card">
                    <h2>üåé Comparativa Regional (Estabilidad del D√≥lar)</h2>
                    <div class="regional-grid">
                        <div class="regional-item">
                            <div class="regional-flag">üáµüáæ</div>
                            <h3>Paraguay (PYG)</h3>
                            <p id="regionalPY">-</p>
                        </div>
                        <div class="regional-item">
                            <div class="regional-flag">üá¶üá∑</div>
                            <h3>Argentina (ARS)</h3>
                            <p id="regionalAR">-</p>
                        </div>
                        <div class="regional-item">
                            <div class="regional-flag">üáßüá∑</div>
                            <h3>Brasil (BRL)</h3>
                            <p id="regionalBR">-</p>
                        </div>
                    </div>
                </div>

                <!-- Detailed Breakdown Table -->
                <div class="table-card">
                    <h2>üìù Detailed Breakdown Table</h2>
                    <div class="table-wrapper">
                        <table class="data-table" id="breakdownTable">
                            <thead>
                                <tr>
                                    <th>DATE</th>
                                    <th>USD AMOUNT</th>
                                    <th>EXCHANGE RATE<br>(USD/PYG)</th>
                                    <th>NOMINAL PYG VALUE</th>
                                    <th>CUMULATIVE INFLATION FACTOR<br>(FROM START)</th>
                                    <th>REAL PYG VALUE<br>(ADJUSTED TO START PP)</th>
                                    <th>REAL USD EQUIVALENT<br>(ADJUSTED TO START PP)</th>
                                </tr>
                            </thead>
                            <tbody id="tableBody">
                                <!-- Table rows will be populated by JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Technical Notes -->
                <div class="notes-card">
                    <h3>üìå Notas T√©cnicas</h3>
                    <ul id="technicalNotes">
                        <li>Los datos de tipo de cambio son obtenidos de fuentes oficiales del Banco Central del
                            Paraguay.
                        </li>
                        <li>La inflaci√≥n acumulada se calcula utilizando el √çndice de Precios al Consumidor (IPC)
                            oficial.
                        </li>
                    </ul>
                </div>
        </section>

        <!-- Loading Indicator -->
        <div class="loading-overlay hidden" id="loadingOverlay">
            <div class="loading-spinner"></div>
            <p>Procesando datos y generando an√°lisis...</p>
        </div>
    </div>

    <script type="module" src="src/main.js"></script>
</body>

</html>